{"ast":null,"code":"var API = {};\n\nfunction fail() {\n  return Math.floor(Math.random() * (5 - 1)) === 3;\n}\n\nfunction generateId() {\n  return Math.random().toString(36).substring(2);\n}\n\nvar goals = [{\n  id: generateId(),\n  name: 'Learn Redux'\n}, {\n  id: generateId(),\n  name: 'Read 50 books this year'\n}];\nvar todos = [{\n  id: generateId(),\n  name: 'Walk the dog',\n  complete: false\n}, {\n  id: generateId(),\n  name: 'Wash the car',\n  complete: false\n}, {\n  id: generateId(),\n  name: 'Go to the gym',\n  complete: true\n}];\n\nAPI.fetchGoals = function () {\n  return new Promise(function (res, rej) {\n    setTimeout(function () {\n      res(goals);\n    }, 2000);\n  });\n};\n\nAPI.fetchTodos = function () {\n  return new Promise(function (res, rej) {\n    setTimeout(function () {\n      res(todos);\n    }, 2000);\n  });\n};\n\nAPI.saveTodo = function (name) {\n  return new Promise(function (res, rej) {\n    setTimeout(function () {\n      var todo = {\n        id: generateId(),\n        name: name,\n        complete: false\n      };\n      todos = todos.concat([todo]);\n      fail() ? rej(todo) : res(todo);\n    }, 300);\n  });\n};\n\nAPI.saveGoal = function (name) {\n  return new Promise(function (res, rej) {\n    setTimeout(function () {\n      var goal = {\n        id: generateId(),\n        name: name\n      };\n      goals = goals.concat([goal]);\n      fail() ? rej(goal) : res(goal);\n    }, 300);\n  });\n};\n\nAPI.deleteGoal = function (id) {\n  return new Promise(function (res, rej) {\n    setTimeout(function () {\n      goals = goals.filter(function (goal) {\n        return goal.id !== id;\n      });\n      fail() ? rej() : res(goals);\n    }, 300);\n  });\n};\n\nAPI.deleteTodo = function (id) {\n  return new Promise(function (res, rej) {\n    setTimeout(function () {\n      todos = todos.filter(function (todo) {\n        return todo.id !== id;\n      });\n      fail() ? rej() : res(todos);\n    }, 300);\n  });\n};\n\nAPI.saveTodoToggle = function (id) {\n  return new Promise(function (res, rej) {\n    setTimeout(function () {\n      todos = todos.map(function (todo) {\n        return todo.id !== id ? todo : Object.assign({}, todo, {\n          complete: !todo.complete\n        });\n      });\n      fail() ? rej() : res(todos);\n    }, 300);\n  });\n};\n\nmodule.exports = API;","map":null,"metadata":{},"sourceType":"script"}